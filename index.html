<!doctype html>
<html lang="da">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valgbar – Vælg valg</title>

  <!-- Tailwind CSS (CDN) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root { --vb-navy:#234a5a; --vb-navy-2:#1f4352; }
    .vb-hero{
      background: linear-gradient(180deg, var(--vb-navy) 0%, var(--vb-navy-2) 100%);
      color:#fff;
    }
    /* Række-stil som i eksemplet */
    .vb-row{
      background: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
      border:1px solid #e5e7eb; border-radius:12px; box-shadow:0 1px 2px rgba(16,24,40,.04);
    }
    .vb-row:hover{ box-shadow:0 4px 14px rgba(0,0,0,.06); }
    .vb-chevron{ transition: transform .2s ease; }
    .vb-open .vb-chevron{ transform: rotate(180deg); }
    /* Smooth fold-ud uden hop */
    .vb-body{ overflow:hidden; transition:grid-template-rows .25s ease, padding .2s ease; display:grid; grid-template-rows:0fr; }
    .vb-open .vb-body{ grid-template-rows:1fr; }
    .vb-body > div{ min-height:0; }
    /* År-knapper */
    .vb-yearbtn{ display:flex; align-items:center; justify-content:center; padding:.8rem 1rem;
                 border:1px solid #e5e7eb; border-radius:10px; background:#fff; font-weight:600; }
    .vb-yearbtn:hover{ background:#f3f4f6; }
  </style>
</head>

<body class="bg-gray-50 text-gray-900">
  <!-- HEADER -->
  <header class="vb-hero">
    <div class="mx-auto max-w-6xl px-4 pt-8 pb-4 flex items-center justify-center">
      <a href="./" aria-label="Valgbar">
        <img src="Valgbar-transparent3.png" alt="Valgbar" class="h-20 md:h-24 w-auto" />
      </a>
    </div>
    <div class="mx-auto max-w-3xl px-4 pb-8 text-center">
      <p class="text-white text-sm md:text-base leading-relaxed">
        <strong>Valgbar</strong> har fokus på kandidater og viser, hvor mange stemmer en kandidat har modtaget i en kreds eller kommune fordelt på valgsteder.
        Du kan også bruge siden til at sammenligne kandidaters resultater.
      </p>
    </div>
    <div class="border-t border-white/20"></div>
  </header>

  <!-- INDHOLD -->
  <main class="mx-auto max-w-5xl p-4 md:p-6 space-y-4">
    <section id="list" class="space-y-3">
      <!-- Rækker indsprøjtes af JS -->
    </section>
  </main>

  <script>
    /* ====== KONFIG ====== */
    const YEARS = {
      ft: [2022, 2019, 2015],
      kv: [2021, 2017, 2013],
      rv: [2021, 2017, 2013],
      ep: [2024, 2019, 2014]
    };
    // Navigation: kun KV 2021 kører nu
    const DEST = {
      kv: { perYear:{ 2021:'kv/2021/' } },
      ft: {}, rv: {}, ep: {}
    };
    const TITLES = {
      ft:'Folketingsvalg', kv:'Kommunalvalg', rv:'Regionsrådsvalg', ep:'Europa-Parlamentsvalg'
    };
    const ORDER = ['ft','kv','rv','ep'];

    /* ====== RENDER ====== */
    const root = document.getElementById('list');

    ORDER.forEach(type=>{
      const row = document.createElement('article');
      row.className = 'vb-row';
      row.innerHTML = `
        <button type="button"
                class="w-full flex items-center gap-3 px-4 md:px-5 py-4 text-left"
                aria-expanded="false"
                data-acc="${type}">
          <h2 class="text-base md:text-lg font-semibold text-slate-800 flex-1">${TITLES[type]}</h2>
          <svg class="vb-chevron h-5 w-5 text-slate-500" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
            <path d="M5.23 7.21a.75.75 0 011.06.02L10 11.1l3.71-3.87a.75.75 0 111.08 1.04l-4.24 4.43a.75.75 0 01-1.08 0L5.27 8.27a.75.75 0 01-.04-1.06z"/>
          </svg>
        </button>
        <div class="vb-body">
          <div>
            <div class="px-4 md:px-5 pt-0 pb-4">
              <div class="grid grid-cols-2 sm:grid-cols-3 gap-2">
                ${(YEARS[type]||[]).map(y=>`
                  <a href="${linkFor(type,y)}"
                     class="vb-yearbtn"
                     ${isActive(type,y)?'':'onclick="return notReady(\\''+TITLES[type]+' '+y+'\\')"'}>
                    ${y}
                  </a>`).join('')}
              </div>
            </div>
          </div>
        </div>
      `;
      root.appendChild(row);
    });

    /* ====== INTERAKTION ====== */
    root.addEventListener('click', (e)=>{
      const btn = e.target.closest('[data-acc]');
      if(!btn) return;
      const article = btn.closest('article');
      const open = article.classList.toggle('vb-open');
      btn.setAttribute('aria-expanded', open ? 'true':'false');

      // Luk andre rækker (klassisk accordion)
      if(open){
        document.querySelectorAll('#list article.vb-open').forEach(el=>{
          if(el!==article){ el.classList.remove('vb-open');
            el.querySelector('[data-acc]').setAttribute('aria-expanded','false'); }
        });
      }
    });
    // Tastatur (Enter/Space)
    document.querySelectorAll('[data-acc]').forEach(b=>{
      b.addEventListener('keydown', (e)=>{
        if(e.key==='Enter' || e.key===' '){ e.preventDefault(); b.click(); }
      });
    });

    /* ====== HJÆLPERE ====== */
    function isActive(type, year){
      return !!DEST[type]?.perYear?.[year];
    }
    function linkFor(type, year){
      return DEST[type]?.perYear?.[year] ?? '#';
    }
    function notReady(label){
      alert(label + ' er ikke aktiveret endnu.');
      return false;
    }
  </script>
</body>
</html>
